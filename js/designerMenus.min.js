'use strict';var objPathName='obj/PC/PC300AHPLAPL.obj',materialMeshes=['FR1','FR2','IB1','CO1','CO2','LC1','TN1','TK1','TT1'],materialMeshGroups={mainFrontMat:['FR1','FR2','CO1','CO2','IB1','ST1','BB2'],mainBackMat:['LC1','TN1','TT1','TK1'],heelMat:['HE1','PF1'],capsMat:['PT1','TO1','BB1','SH1','PH1'],strapsMat:['LS1','MJ1','MJ2','TB1','TB2','BI1','BI2','BI3','BI4','TN2','TK2','TK3','TT2','TT3','TT4','TT5'],defaultMat:['FR1','FR2','IB1','CO1','CO2','LC1','TN1','TK1','TT1']},defaultMeshMaterials={SO1:'matSO01',SO2:'matSO01',LO1:'matLO01',IL1:'matIL01',HT1:'matHT01',IN1:'matLI01',LI1:'matLI01',TN1LI:'matLI01',TN2LI:'matLI01',TK1LI:'matLI01',TK2LI:'matLI01',TT1LI:'matLI01',TT2LI:'matLI01',CO1LI:'matLI01',CO2LI:'matLI01',LC1LI:'matLI01',LS1LI:'matLI01',MJ1LI:'matLI01',TB1LI:'matLI01',BI1LI:'matLI01',BI2LI:'matLI01',HG1:'matHG01',LC1HG:'matHG01',TN1HG:'matHG01',TK1HG:'matHG01',TT1HG:'matHG01',TN1BK:'matBK01',TK1BK:'matBK01',TT1BK:'matBK01',TT2BK:'matBK01',MJ1BK:'matBK01',TB1BK:'matBK01',BI1BK:'matBK01',BI2BK:'matBK01',GC1:'matBK01',GE1:'matGE01',GE2:'matGE01',GE3:'matGE01'},figureStart='<figure class="col-xs-3 col-sm-4 col-md-3 shoe-thumb">',figureEnd='</figure>';function thumbSingle(a,b){var c='';b&&(c='selected');var d='<img src=\''+a.imgSrc+'\' abr = \''+a.abr+'\'\' alt=\''+a.tooltip+'\' obj=\''+a.objSrc+'\' selection=\''+a.selection+'\' class=\''+c+'\'>';return figureStart+d+figureEnd}function thumbMany(a,b,c){for(var d='<div><button type=\'button\' class=\'btn btn-secondary btn-lg btn-block\'>'+b+'</button><div class=\'row\'><div id=\'thumbCsDiv\' class=\'col-xs-12 thumb-container\'>',f=0;f<a.length;f++)d+=thumbSingle(a[f],f===c);return d+='</div></div></div>',d}var figureSwatchStart='<figure class="col-xs-2 col-sm-3 col-md-2 shoe-thumb">',figureSwatchEnd='</figure>';function swatchSingle(a,b){var c='';b&&(c='selected');var d='<img src=\''+a.imgSrc+'\' abr = \''+a.abr+'\'\' matName=\''+a.matName+'\'>';return figureSwatchStart+d+figureSwatchEnd}function swatchMany(a,b){for(var c='<div><button type=\'button\' class=\'btn btn-secondary btn-lg btn-block\'>'+b+'</button><div class=\'row\'><div class=\'col-xs-12 swatch-container\'><div>Pick a shoe part from the 3D designer to add material</div>',d=0;d<a.length;d++)c+=swatchSingle(a[d]);return c+='</div></div></div>',c}var btnSlide=function(a,b){return function(){var c=$(this).parent().find(b);'none'===c[0].style.display?c.slideDown(a):c.slideUp(a)}},onThumbClick=function(){var a=$(this).attr('selection'),b=a.split(',').map(function(j){return parseInt(j)});redrawMenu(b);var c=window.objectContainer,d=c.obj;if($(this).attr('obj')!=c.obj.name)if('none'!=$(this).attr('obj'))$('.swatch-container').hide(),$('#canvasButtons').hide(),objPathName=$(this).attr('obj'),c.scene.remove(c.obj),c.loadObject(objPathName,c.materials.matGrey,c.materials.matDarkGrey);else if('none'==$(this).attr('obj')){var f=$(this).attr('abr').split(','),g=[];$(this).parent().parent().find('img').each(function(j,k){g=g.concat($(k).attr('abr').split(','))});var h=jQuery.grep(g,function(j){return!f.includes(j)});d.traverse(function(j){j instanceof THREE.Mesh&&f.includes(j.name)&&(j.visible=!0),j instanceof THREE.Mesh&&h.includes(j.name)&&(j.visible=!1),j.castShadow=j.visible})}},redrawMenu=function(a){var b=$('.thumb-container').map(function(f,g){return g.style.display}).toArray();$('#shoeMenu').html(thumbMany(cs,'Core Shape',a[0])+thumbMany(cs[a[0]].children,'Heels',a[1])+thumbMany(cs[a[0]].children[a[1]].children,'Fronts',a[2])+thumbMany(cs[a[0]].children[a[1]].children[a[2]].children,'Backs',a[3])+thumbMany(cs[a[0]].children[a[1]].children[a[2]].children[a[3]].children,'Straps',a[4])+thumbMany(cs[a[0]].children[a[1]].children[a[2]].children[a[3]].children[a[4]].children,'Embellishments')),$('.thumb-container').each(function(f,g){return g.style.display=b[f]});var c=$('#shoeMenu').find('img');c.click(onThumbClick);var d=$('#shoeMenu .btn');d.click(btnSlide(400,'.thumb-container'))},defaultMatAssign=function(){$('#canvasButtons').show();var a=window.objectContainer,b=a.obj;b.traverse(function(c){if(defaultMeshMaterials[c.name]){var d=defaultMeshMaterials[c.name];c.material=a.materials[d]}})},redrawSwatchMenu=function(){$('#swatchMenu').append(swatchMany(swatches,'Materials'));var a=$('#swatchMenu').find('img');a.click(function(){var b=window.objectContainer,c=b.obj;objMat=$(this).attr('matName'),c.traverse(function(d){d instanceof THREE.Mesh&&materialMeshes.includes(d.name)&&(d.material=b.materials[objMat])})})};$('#canvasButtons').hide(),$(document).ready(function(){redrawMenu([0,1,0,0,0]),redrawSwatchMenu(),$('.thumb-container:gt(0)').hide(),$('.swatch-container').hide();var a=$('#swatchMenu button.btn');a.click(btnSlide(800,'.swatch-container')),a.click(defaultMatAssign),$('#canvasButtons button.btn').click(function(){var b=this.id;materialMeshes=materialMeshGroups[b],materialMeshes==void 0&&(materialMeshes=materialMeshGroups.defaultMat)})});