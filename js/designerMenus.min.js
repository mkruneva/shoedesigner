function thumbSingle(t,a){var e="";a&&(e="selected");var n="<img src='"+t.imgSrc+"' abr = '"+t.abr+"'' alt='"+t.tooltip+"' obj='"+t.objSrc+"' selection='"+t.selection+"' class='"+e+"'>";return figureStart+n+figureEnd}function thumbMany(t,a,e){for(var n="<div><button type='button' class='btn btn-secondary btn-lg btn-block'>"+a+"</button><div class='row'><div id='thumbCsDiv' class='col-xs-12 thumb-container'>",i=0;i<t.length;i++)n+=thumbSingle(t[i],i===e);return n+="</div></div></div>"}function swatchSingle(t,a){var e="<img src='"+t.imgSrc+"' abr = '"+t.abr+"'' matName='"+t.matName+"'>";return figureSwatchStart+e+figureSwatchEnd}function swatchMany(t,a){for(var e="<div><button type='button' class='btn btn-secondary btn-lg btn-block'>"+a+"</button><div class='row'><div class='col-xs-12 swatch-container'><div>Pick a shoe part from the 3D designer to add material</div>",n=0;n<t.length;n++)e+=swatchSingle(t[n]);return e+="</div></div></div>"}var objPathName="obj/PC/PC300AHPLAPL.obj",materialMeshes=["FR1","FR2","IB1","CO1","CO2","LC1","TN1","TK1","TT1"],materialMeshGroups={mainFrontMat:["FR1","FR2","CO1","CO2","IB1","ST1","BB2"],mainBackMat:["LC1","TN1","TT1","TK1"],heelMat:["HE1","PF1"],capsMat:["PT1","TO1","BB1","SH1","PH1"],strapsMat:["LS1","MJ1","MJ2","TB1","TB2","BI1","BI2","BI3","BI4","TN2","TK2","TK3","TT2","TT3","TT4","TT5"],defaultMat:["FR1","FR2","IB1","CO1","CO2","LC1","TN1","TK1","TT1"]},defaultMeshMaterials={SO1:"matSO01",SO2:"matSO01",LO1:"matLO01",IL1:"matIL01",HT1:"matHT01",IN1:"matLI01",LI1:"matLI01",TN1LI:"matLI01",TN2LI:"matLI01",TK1LI:"matLI01",TK2LI:"matLI01",TT1LI:"matLI01",TT2LI:"matLI01",CO1LI:"matLI01",CO2LI:"matLI01",LC1LI:"matLI01",LS1LI:"matLI01",MJ1LI:"matLI01",TB1LI:"matLI01",BI1LI:"matLI01",BI2LI:"matLI01",HG1:"matHG01",LC1HG:"matHG01",TN1HG:"matHG01",TK1HG:"matHG01",TT1HG:"matHG01",TN1BK:"matBK01",TK1BK:"matBK01",TT1BK:"matBK01",TT2BK:"matBK01",MJ1BK:"matBK01",TB1BK:"matBK01",BI1BK:"matBK01",BI2BK:"matBK01",GC1:"matBK01",GE1:"matGE01",GE2:"matGE01",GE3:"matGE01"},figureStart='<figure class="col-xs-3 col-sm-4 col-md-3 shoe-thumb">',figureEnd="</figure>",figureSwatchStart='<figure class="col-xs-2 col-sm-3 col-md-2 shoe-thumb">',figureSwatchEnd="</figure>",btnSlide=function(t,a){return function(){var e=$(this).parent().find(a);"none"===e[0].style.display?e.slideDown(t):e.slideUp(t)}},onThumbClick=function(){var t=$(this).attr("selection").split(",").map(function(t){return parseInt(t)});redrawMenu(t);var a=window.objectContainer,e=a.obj;if($(this).attr("obj")!=a.obj.name)if("none"!=$(this).attr("obj"))$(".swatch-container").hide(),$("#canvasButtons").hide(),objPathName=$(this).attr("obj"),a.scene.remove(a.obj),a.loadObject(objPathName,a.materials.matGrey,a.materials.matDarkGrey);else if("none"==$(this).attr("obj")){var n=$(this).attr("abr").split(","),i=[];$(this).parent().parent().find("img").each(function(t,a){i=i.concat($(a).attr("abr").split(","))});var r=jQuery.grep(i,function(t,a){return!n.includes(t)});e.traverse(function(t){t instanceof THREE.Mesh&&n.includes(t.name)&&(t.visible=!0),t instanceof THREE.Mesh&&r.includes(t.name)&&(t.visible=!1),t.castShadow=t.visible})}},redrawMenu=function(t){var a=$(".thumb-container").map(function(t,a){return a.style.display}).toArray();$("#shoeMenu").html(thumbMany(cs,"Core Shape",t[0])+thumbMany(cs[t[0]].children,"Heels",t[1])+thumbMany(cs[t[0]].children[t[1]].children,"Fronts",t[2])+thumbMany(cs[t[0]].children[t[1]].children[t[2]].children,"Backs",t[3])+thumbMany(cs[t[0]].children[t[1]].children[t[2]].children[t[3]].children,"Straps",t[4])+thumbMany(cs[t[0]].children[t[1]].children[t[2]].children[t[3]].children[t[4]].children,"Embellishments")),$(".thumb-container").each(function(t,e){e.style.display=a[t]}),$("#shoeMenu").find("img").click(onThumbClick),$("#shoeMenu .btn").click(btnSlide(400,".thumb-container"))},defaultMatAssign=function(){$("#canvasButtons").show();var t=window.objectContainer;t.obj.traverse(function(a){if(defaultMeshMaterials[a.name]){var e=defaultMeshMaterials[a.name];a.material=t.materials[e]}})},redrawSwatchMenu=function(){$("#swatchMenu").append(swatchMany(swatches,"Materials")),$("#swatchMenu").find("img").click(function(){var t=window.objectContainer,a=t.obj;objMat=$(this).attr("matName"),a.traverse(function(a){a instanceof THREE.Mesh&&materialMeshes.includes(a.name)&&(a.material=t.materials[objMat])})})};$("#canvasButtons").hide(),$(document).ready(function(){redrawMenu([0,1,0,0,0]),redrawSwatchMenu(),$(".thumb-container:gt(0)").hide(),$(".swatch-container").hide();var t=$("#swatchMenu button.btn");t.click(btnSlide(800,".swatch-container")),t.click(defaultMatAssign),$("#canvasButtons button.btn").click(function(){var t=this.id;void 0==(materialMeshes=materialMeshGroups[t])&&(materialMeshes=materialMeshGroups.defaultMat)})});